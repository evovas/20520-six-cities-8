(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{25:function(e,t,a){e.exports={loaderWrapperFullScreen:"loader_loaderWrapperFullScreen__Q0-Pb",loaderWrapperFavoritesScreen:"loader_loaderWrapperFavoritesScreen__1Bnz3",loaderWrapperLogin:"loader_loaderWrapperLogin__3pC0Z",loaderWrapperReview:"loader_loaderWrapperReview__1A4YT"}},29:function(e,t,a){e.exports={loginInputWrapper:"login-form_loginInputWrapper__3z3w4",loginInputErrorMessage:"login-form_loginInputErrorMessage__1_WMs",loginInputError:"login-form_loginInputError__3umeQ"}},46:function(e,t,a){e.exports={placeCardType:"place-card_placeCardType__1-WR4"}},47:function(e,t,a){e.exports={cities__map:"map_cities__map__1AMsR",property__map:"map_property__map__3awWG"}},49:function(e,t,a){e.exports={propertyFeatureEntire:"room_propertyFeatureEntire__1Pmee"}},89:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),c=a(22),i=a.n(c),n=a(2),o=a(3),l=a(19),u=a(7),d=a(5),j=a.n(d),f=a(6),p=a(0);var b,v,O,h,m,_,x=function(){return Object(p.jsx)(f.b,{className:"header__logo-link header__logo-link--active",to:"/","data-testid":"logo",children:Object(p.jsx)("img",{className:"header__logo",src:"/20520-six-cities-8/img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})},g=a(8),N=a.n(g),w=a(17),y=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"];!function(e){e.Favorites="/favorites",e.Login="/login",e.Room="/offer/:id",e.Root="/"}(b||(b={})),function(e){e.Auth="AUTH",e.NoAuth="NO_AUTH",e.Unknown="UNKNOWN"}(v||(v={})),function(e){e.Popular="Popular",e.PriceLowFirst="Price: low to high",e.PriceHighFirst="Price: high to low",e.TopRatedFirst="Top rated first"}(O||(O={})),function(e){e.Idle="IDLE",e.Loading="LOADING",e.Success="SUCCESS",e.Failed="FAILED"}(h||(h={})),function(e){e.Offers="/hotels",e.Login="/login",e.Logout="/logout",e.Nearby="/nearby",e.Comments="/comments",e.Favorite="/favorite"}(m||(m={})),function(e){e.SelectCity="ui/selectCity",e.SelectSortingOption="ui/selectSortingOption",e.SetFavoriteOptionRequest="favorites/setFavoriteOptionRequest",e.SetFavoriteOptionSuccess="favorites/setFavoriteOptionSuccess",e.SetFavoriteOptionFailed="favorites/setFavoriteOptionFailed",e.LoadFavoriteOffersRequest="favorites/loadFavoriteOffersRequest",e.LoadFavoriteOffersSuccess="favorites/loadFavoriteOffersSuccess",e.LoadFavoriteOffersFailed="favorites/loadFavoriteOffersFailed",e.DropFavoriteOffers="favorites/dropFavoriteOffers",e.DeleteFavoriteOffer="favorites/deleteFavoriteOffer",e.LoadOffersRequest="offers/loadOffersRequest",e.LoadOffersSuccess="offers/loadOffersSuccess",e.LoadOffersFailed="offers/loadOffersFailed",e.LoadOfferRequest="offers/loadOfferRequest",e.LoadOfferSuccess="offers/loadOfferSuccess",e.LoadOfferFailed="offers/loadOfferFailed",e.LoadNearbyOffersRequest="offers/loadNearbyOffersRequest",e.LoadNearbyOffersSuccess="offers/loadNearbyOffersSuccess",e.LoadNearbyOffersFailed="offers/loadNearbyOffersFailed",e.DropRoomOffersData="offers/dropRoomOffersData",e.ReplaceOffer="offers/replaceOffer",e.LoadReviewsRequest="reviews/loadReviewsRequest",e.LoadReviewsSuccess="reviews/loadReviewsSuccess",e.LoadReviewsFailed="reviews/loadReviewsFailed",e.DropRoomReviewsData="reviews/dropRoomReviewsData",e.PostReviewRequest="reviews/postReviewRequest",e.PostReviewSuccess="reviews/postReviewSuccess",e.PostReviewFailed="reviews/postReviewFailed",e.ResetPostReview="reviews/resetPostReview",e.SaveCurrentUser="user/saveCurrentUser",e.DropCurrentUser="user/dropCurrentUser",e.CheckAuthRequest="user/checkAuthRequest",e.CheckAuthSuccess="user/checkAuthSuccess",e.CheckAuthFailed="user/checkAuthFailed",e.RequireAuthorizationRequest="user/requireAuthorizationRequest",e.RequireAuthorizationSuccess="user/requireAuthorizationSuccess",e.RequireAuthorizationFailed="user/requireAuthorizationFailed",e.RequireLogoutRequest="user/requireLogoutRequest",e.RequireLogoutSuccess="user/requireLogoutSuccess",e.RequireLogoutFailed="user/requireLogoutFailed"}(_||(_={}));var S,F,R=Object(n.b)(_.SelectCity,(function(e){return{payload:e}})),C=Object(n.b)(_.SelectSortingOption,(function(e){return{payload:e}})),k=Object(n.b)(_.SetFavoriteOptionRequest),L=Object(n.b)(_.SetFavoriteOptionSuccess),q=Object(n.b)(_.SetFavoriteOptionFailed),A=Object(n.b)(_.LoadFavoriteOffersRequest),z=Object(n.b)(_.LoadFavoriteOffersSuccess,(function(e){return{payload:e}})),I=Object(n.b)(_.LoadFavoriteOffersFailed),P=Object(n.b)(_.DropFavoriteOffers),U=Object(n.b)(_.DeleteFavoriteOffer,(function(e){return{payload:e}})),M=Object(n.b)(_.LoadOffersRequest),T=Object(n.b)(_.LoadOffersSuccess,(function(e){return{payload:e}})),E=Object(n.b)(_.LoadOffersFailed),D=Object(n.b)(_.LoadOfferRequest),W=Object(n.b)(_.LoadOfferSuccess,(function(e){return{payload:e}})),H=Object(n.b)(_.LoadOfferFailed),Y=Object(n.b)(_.LoadNearbyOffersRequest),B=Object(n.b)(_.LoadNearbyOffersSuccess,(function(e){return{payload:e}})),V=Object(n.b)(_.LoadNearbyOffersFailed),Z=Object(n.b)(_.DropRoomOffersData),$=Object(n.b)(_.ReplaceOffer,(function(e){return{payload:e}})),G=Object(n.b)(_.LoadReviewsRequest),J=Object(n.b)(_.LoadReviewsSuccess,(function(e){return{payload:e}})),Q=Object(n.b)(_.LoadReviewsFailed),K=Object(n.b)(_.DropRoomReviewsData),X=Object(n.b)(_.PostReviewRequest),ee=Object(n.b)(_.PostReviewSuccess,(function(e){return{payload:e}})),te=Object(n.b)(_.PostReviewFailed),ae=Object(n.b)(_.ResetPostReview),re=Object(n.b)(_.SaveCurrentUser,(function(e){return{payload:e}})),se=Object(n.b)(_.DropCurrentUser),ce=Object(n.b)(_.CheckAuthRequest),ie=Object(n.b)(_.CheckAuthSuccess,(function(e){return{payload:e}})),ne=Object(n.b)(_.CheckAuthFailed),oe=Object(n.b)(_.RequireAuthorizationRequest),le=Object(n.b)(_.RequireAuthorizationSuccess),ue=Object(n.b)(_.RequireAuthorizationFailed),de=Object(n.b)(_.RequireLogoutRequest),je=Object(n.b)(_.RequireLogoutSuccess),fe=Object(n.b)(_.RequireLogoutFailed),pe=a(9),be=function(e){var t=Object(pe.a)(Object(pe.a)({},e),{},{isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image,host:Object(pe.a)(Object(pe.a)({},e.host),{},{avatarUrl:e.host.avatar_url,isPro:e.host.is_pro})});return delete t.is_favorite,delete t.is_premium,delete t.max_adults,delete t.preview_image,delete t.host.avatar_url,delete t.host.is_pro,t},ve=function(e){var t=Object(pe.a)(Object(pe.a)({},e),{},{user:Object(pe.a)(Object(pe.a)({},e.user),{},{avatarUrl:e.user.avatar_url,isPro:e.user.is_pro})});return delete t.user.avatar_url,delete t.user.is_pro,t},Oe=function(e){var t=Object(pe.a)(Object(pe.a)({},e),{},{avatarUrl:e.avatar_url,isPro:e.is_pro});return delete t.avatar_url,delete t.is_pro,t},he="six-cities-token",me=function(e){localStorage.setItem(he,e)},_e=function(){localStorage.removeItem(he)},xe="An error occurred, please try later",ge=function(){return function(){var e=Object(w.a)(N.a.mark((function e(t,a,r){var s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M()),e.prev=1,e.next=4,r.get(m.Offers);case 4:s=e.sent,c=s.data,t(T(c.map((function(e){return be(e)})))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(E());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,r){return e.apply(this,arguments)}}()},Ne=a(10),we=a(18),ye={favoriteOptionStatus:h.Idle,favoriteOffersStatus:h.Idle,favoriteOffers:[]},Se=Object(n.c)(ye,(function(e){e.addCase(k,(function(e){e.favoriteOptionStatus=h.Loading})).addCase(L,(function(e){e.favoriteOptionStatus=h.Success})).addCase(q,(function(e){e.favoriteOptionStatus=h.Failed})).addCase(A,(function(e){e.favoriteOffersStatus=h.Loading})).addCase(z,(function(e,t){e.favoriteOffersStatus=h.Success,e.favoriteOffers=t.payload})).addCase(I,(function(e){e.favoriteOffersStatus=h.Failed})).addCase(P,(function(e){e.favoriteOffersStatus=h.Idle,e.favoriteOffers=[]})).addCase(U,(function(e,t){e.favoriteOffers=e.favoriteOffers.filter((function(e){return e.id!==t.payload.id}))}))})),Fe={offers:[],offersStatus:h.Idle,offer:null,offerStatus:h.Idle,nearbyOffers:[],nearbyOffersStatus:h.Idle},Re=Object(n.c)(Fe,(function(e){e.addCase(M,(function(e){e.offersStatus=h.Loading})).addCase(T,(function(e,t){e.offersStatus=h.Success,e.offers=t.payload})).addCase(E,(function(e){e.offersStatus=h.Failed})).addCase(D,(function(e){e.offerStatus=h.Loading})).addCase(W,(function(e,t){e.offerStatus=h.Success,e.offer=t.payload})).addCase(H,(function(e){e.offerStatus=h.Failed})).addCase(Y,(function(e){e.nearbyOffersStatus=h.Loading})).addCase(B,(function(e,t){e.nearbyOffersStatus=h.Success,e.nearbyOffers=t.payload})).addCase(V,(function(e){e.nearbyOffersStatus=h.Failed})).addCase(Z,(function(e){e.offer=null,e.offerStatus=h.Idle,e.nearbyOffers=[],e.nearbyOffersStatus=h.Idle})).addCase($,(function(e,t){var a=e.offers.findIndex((function(e){return e.id===t.payload.id}));-1!==a&&(e.offers[a].isFavorite=t.payload.isFavorite);var r=e.nearbyOffers.findIndex((function(e){return e.id===t.payload.id}));-1!==r&&(e.nearbyOffers[r].isFavorite=t.payload.isFavorite),e.offer&&-1===r&&(e.offer=t.payload)}))})),Ce={reviews:[],reviewsStatus:h.Idle,reviewPostStatus:h.Idle},ke=Object(n.c)(Ce,(function(e){e.addCase(G,(function(e){e.reviewsStatus=h.Loading})).addCase(J,(function(e,t){e.reviewsStatus=h.Success,e.reviews=t.payload})).addCase(Q,(function(e){e.reviewsStatus=h.Failed})).addCase(K,(function(e){e.reviews=[],e.reviewsStatus=h.Idle})).addCase(X,(function(e){e.reviewPostStatus=h.Loading})).addCase(ee,(function(e,t){e.reviewPostStatus=h.Success,e.reviews=t.payload})).addCase(te,(function(e){e.reviewPostStatus=h.Failed})).addCase(ae,(function(e){e.reviewPostStatus=h.Idle}))})),Le={currentCityName:"Paris",currentSorting:O.Popular},qe=Object(n.c)(Le,(function(e){e.addCase(R,(function(e,t){e.currentCityName=t.payload})).addCase(C,(function(e,t){e.currentSorting=t.payload}))})),Ae={currentUser:null,checkAuthStatus:h.Idle,authorizationStatus:v.Unknown,authorizationRequestStatus:h.Idle,logoutStatus:h.Idle},ze=Object(n.c)(Ae,(function(e){e.addCase(re,(function(e,t){e.currentUser=t.payload})).addCase(se,(function(e){e.currentUser=null})).addCase(ce,(function(e){e.checkAuthStatus=h.Loading})).addCase(ie,(function(e,t){e.checkAuthStatus=h.Success,e.authorizationStatus=t.payload})).addCase(ne,(function(e){e.checkAuthStatus=h.Failed,e.authorizationStatus=v.NoAuth})).addCase(oe,(function(e){e.authorizationRequestStatus=h.Loading})).addCase(le,(function(e){e.authorizationRequestStatus=h.Success,e.authorizationStatus=v.Auth})).addCase(ue,(function(e){e.authorizationRequestStatus=h.Failed})).addCase(de,(function(e){e.logoutStatus=h.Loading})).addCase(je,(function(e){e.logoutStatus=h.Success,e.authorizationStatus=v.NoAuth})).addCase(fe,(function(e){e.logoutStatus=h.Failed}))}));!function(e){e.Favorites="FAVORITES",e.Offers="OFFERS",e.Reviews="REVIEWS",e.Ui="UI",e.User="USER"}(F||(F={}));var Ie=Object(we.b)((S={},Object(Ne.a)(S,F.Favorites,Se),Object(Ne.a)(S,F.Offers,Re),Object(Ne.a)(S,F.Reviews,ke),Object(Ne.a)(S,F.Ui,qe),Object(Ne.a)(S,F.User,ze),S)),Pe=function(e){return e[F.User].currentUser},Ue=function(e){return e[F.User].authorizationStatus},Me=function(e){return e[F.User].authorizationRequestStatus};var Te=function(){var e=Object(o.b)(),t=Object(o.c)(Pe);return Object(p.jsxs)("ul",{className:"header__nav-list","data-testid":"auth-user-menu",children:[Object(p.jsx)("li",{className:"header__nav-item user",children:Object(p.jsxs)(f.b,{className:"header__nav-link header__nav-link--profile",to:b.Favorites,children:[Object(p.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(p.jsx)("span",{className:"header__user-name user__name",children:t&&t.email})]})}),Object(p.jsx)("li",{className:"header__nav-item",children:Object(p.jsx)(f.b,{className:"header__nav-link",to:b.Root,onClick:function(){e(function(){var e=Object(w.a)(N.a.mark((function e(t,a,r){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(de()),e.prev=1,e.next=4,r.delete(m.Logout);case 4:return _e(),e.next=7,t(ge());case 7:t(je()),t(se()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t(fe()),l.b.info(xe);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a,r){return e.apply(this,arguments)}}())},children:Object(p.jsx)("span",{className:"header__signout",children:"Sign out"})})})]})};var Ee=function(){return Object(p.jsx)("ul",{className:"header__nav-list","data-testid":"no-auth-user-menu",children:Object(p.jsx)("li",{className:"header__nav-item user",children:Object(p.jsxs)(f.b,{className:"header__nav-link header__nav-link--profile",to:b.Login,children:[Object(p.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(p.jsx)("span",{className:"header__login",children:"Sign in"})]})})})};var De=function(){var e=Object(o.c)(Ue);return Object(p.jsx)("header",{className:"header","data-testid":"header",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"header__wrapper",children:[Object(p.jsx)("div",{className:"header__left",children:Object(p.jsx)(x,{})}),Object(p.jsx)("nav",{className:"header__nav",children:e===v.Auth?Object(p.jsx)(Te,{}):Object(p.jsx)(Ee,{})})]})})})},We=function(e){return e[F.Ui].currentCityName},He=function(e){return e[F.Ui].currentSorting};var Ye=function(e){var t=e.cityName,a=Object(o.b)(),r=Object(o.c)(We);return Object(p.jsx)("li",{className:"locations__item","data-testid":"location-tab",children:Object(p.jsx)(f.b,{className:j()("locations__item-link","tabs__item",{"tabs__item--active":t===r}),onClick:function(){a(R(t))},to:"/",children:Object(p.jsx)("span",{children:t})})})};var Be=function(){return Object(p.jsx)("div",{className:"tabs","data-testid":"location-tabs",children:Object(p.jsx)("section",{className:"locations container",children:Object(p.jsx)("ul",{className:"locations__list tabs__list",children:y.map((function(e){return Object(p.jsx)(Ye,{cityName:e},e)}))})})})},Ve=a(14),Ze=a(28);function $e(e){var t=e.sortingOption,a=e.onChangeOpenSelectState,r=Object(o.b)(),s=Object(o.c)(He);return Object(p.jsx)("li",{className:j()("places__option",{"places__option--active":t===s}),tabIndex:0,onClick:function(){r(C(t)),a()},"data-testid":"sorting-item",children:t})}var Ge=Object(r.memo)($e);function Je(){var e=Object(o.c)(He),t=Object(r.useState)(!1),a=Object(Ve.a)(t,2),s=a[0],c=a[1],i=function(){c(!s)};return Object(p.jsxs)("form",{className:"places__sorting",action:"#",method:"get","data-testid":"sorting",children:[Object(p.jsx)("span",{className:"places__sorting-caption",children:"Sort by "}),Object(p.jsxs)("span",{onClick:i,className:"places__sorting-type",tabIndex:0,children:[e,Object(p.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(p.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(p.jsx)("ul",{className:j()("places__options","places__options--custom",{"places__options--opened":s}),children:Object(Ze.a)(Object.values(O)).map((function(e){return Object(p.jsx)(Ge,{sortingOption:e,onChangeOpenSelectState:i},e)}))})]})}var Qe=Object(r.memo)(Je);var Ke=function(e){var t=e.className;return Object(p.jsx)("div",{className:t,"data-testid":"premium-label",children:Object(p.jsx)("span",{children:"Premium"})})},Xe=function(e){return"".concat(100*Math.round(e)/5,"%")},et=a(46),tt=a.n(et),at={"place-card":{width:"18",height:"19"},property:{width:"31",height:"33"}};var rt=function(e){var t=e.buttonType,a=e.isFavorite,r=e.id,s=Object(o.b)(),c=Object(o.c)(Ue),i=Object(u.g)();return Object(p.jsxs)("button",{className:j()("".concat(t,"__bookmark-button"),"button",{"place-card__bookmark-button--active":a}),onClick:function(){c===v.Auth?s(function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(r,s,c){var i,n,o;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(k()),a.prev=1,a.next=4,c.post("".concat(m.Favorite,"/").concat(e,"/").concat(t));case 4:i=a.sent,n=i.data,o=be(n),r(L()),r($(o)),r(U(o)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),r(q()),l.b.info(xe);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(e,t,r){return a.apply(this,arguments)}}()}(r,a?0:1)):i.push(b.Login)},type:"button","data-testid":"bookmark-button",children:[Object(p.jsx)("svg",{className:"place-card__bookmark-icon",width:at[t].width,height:at[t].height,children:Object(p.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(p.jsx)("span",{className:"visually-hidden",children:a?"In bookmarks":"To bookmarks"})]})},st=new Map([["cities","cities__place-card"],["favorites","favorites__card"],["near-places","near-places__card"]]);function ct(e){var t=e.offer,a=e.cardType,r=e.onMouseEnterCard,s=e.onMouseLeaveCard;return Object(p.jsxs)("article",{className:"".concat(st.get(a)," place-card"),onMouseEnter:function(){r&&r(t.id)},onMouseLeave:function(){s&&s()},"data-testid":"place-card",children:[t.isPremium&&Object(p.jsx)(Ke,{className:"place-card__mark"}),Object(p.jsx)("div",{className:"".concat(a,"__image-wrapper place-card__image-wrapper"),children:Object(p.jsx)(f.b,{to:"/offer/".concat(t.id),"data-testid":"place-card-image-link",children:Object(p.jsx)("img",{className:"place-card__image",src:t.previewImage,width:"favorites"===a?"150":"260",height:"favorites"===a?"110":"200",alt:t.title})})}),Object(p.jsxs)("div",{className:"".concat(a,"__card-info place-card__info"),children:[Object(p.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(p.jsxs)("div",{className:"place-card__price",children:[Object(p.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",t.price]}),Object(p.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(p.jsx)(rt,{buttonType:"place-card",isFavorite:t.isFavorite,id:t.id},t.id)]}),Object(p.jsx)("div",{className:"place-card__rating rating",children:Object(p.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(p.jsx)("span",{style:{width:Xe(t.rating)}}),Object(p.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(p.jsx)("h2",{className:"place-card__name",children:Object(p.jsx)(f.b,{to:"/offer/".concat(t.id),"data-testid":"place-card-title-link",children:t.title})}),Object(p.jsx)("p",{className:j()(tt.a.placeCardType,"place-card__type"),children:t.type})]})]})}var it=Object(r.memo)(ct);function nt(e){var t=e.offers,a=e.cardType,r=e.onMouseEnterCard,s=e.onMouseLeaveCard;return Object(p.jsx)(p.Fragment,{children:t.map((function(e){return Object(p.jsx)(it,{offer:e,cardType:a,onMouseEnterCard:r,onMouseLeaveCard:s},e.id)}))})}var ot=Object(r.memo)(nt),lt=a(21),ut=a.n(lt);var dt=function(e,t){var a=Object(r.useState)(null),s=Object(Ve.a)(a,2),c=s[0],i=s[1];return Object(r.useEffect)((function(){var a=t.location,r=a.latitude,s=a.longitude,n=a.zoom;if(null!==e.current&&null===c){var o=ut.a.map(e.current,{center:{lat:r,lng:s},zoom:n});ut.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(o),i(o)}}),[e,c,t]),c},jt=(a(63),a(47)),ft=a.n(jt);var pt=function(e){var t=e.className,a=e.offers,s=e.city,c=e.activeCardId,i=Object(r.useRef)(null),n=dt(i,s),o=ut.a.icon({iconUrl:"/20520-six-cities-8/img/pin.svg",iconSize:[27,39],iconAnchor:[13,39]}),l=ut.a.icon({iconUrl:"/20520-six-cities-8/img/pin-active.svg",iconSize:[27,39],iconAnchor:[13,39]});return n&&n.setView({lat:s.location.latitude,lng:s.location.longitude},s.location.zoom),Object(r.useEffect)((function(){var e=[];return n&&a.forEach((function(t){var a=t.location,r=a.latitude,s=a.longitude,i=ut.a.marker({lat:r,lng:s},{icon:c===t.id?l:o}).addTo(n);e.push(i)})),function(){return e.forEach((function(e){return e.remove()}))}}),[n,a,c]),Object(p.jsx)("section",{className:j()("map",ft.a[t]),ref:i,"data-testid":"map"})};var bt=function(e){var t=e.currentCityOffers,a=t[0].city,s=Object(r.useState)(null),c=Object(Ve.a)(s,2),i=c[0],n=c[1],o=Object(r.useCallback)((function(e){n(e)}),[]),l=Object(r.useCallback)((function(){n(null)}),[]);return Object(p.jsxs)("div",{className:"cities__places-container container","data-testid":"offers-board",children:[Object(p.jsxs)("section",{className:"cities__places places",children:[Object(p.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(p.jsxs)("b",{className:"places__found",children:[t.length," places to stay in ",a.name]}),Object(p.jsx)(Qe,{}),Object(p.jsx)("div",{className:"cities__places-list places__list tabs__content",children:Object(p.jsx)(ot,{offers:t,cardType:"cities",onMouseEnterCard:o,onMouseLeaveCard:l})})]}),Object(p.jsx)("div",{className:"cities__right-section",children:Object(p.jsx)(pt,{className:"cities__map",offers:t,city:a,activeCardId:i})})]})};var vt=function(e){var t=e.currentCityName;return Object(p.jsxs)("div",{className:"cities__places-container cities__places-container--empty container","data-testid":"offers-board-empty",children:[Object(p.jsx)("section",{className:"cities__no-places",children:Object(p.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(p.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(p.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",t]})]})}),Object(p.jsx)("div",{className:"cities__right-section"})]})},Ot=a(26),ht=function(e,t){return e.price-t.price},mt=function(e,t){return t.price-e.price},_t=function(e,t){return t.rating-e.rating},xt=function(e){return e[F.Offers].offersStatus},gt=function(e){return e[F.Offers].offer},Nt=function(e){return e[F.Offers].offerStatus},wt=function(e){return e[F.Offers].nearbyOffers},yt=Object(Ot.a)([function(e){return e[F.Offers].offers},We,He],(function(e,t,a){return function(e,t){switch(t){case O.Popular:return e;case O.PriceLowFirst:return e.sort(ht);case O.PriceHighFirst:return e.sort(mt);case O.TopRatedFirst:return e.sort(_t)}}(e.filter((function(e){return e.city.name===t})),a)}));var St=function(){var e=Object(o.c)(We),t=Object(o.c)(yt);return Object(p.jsxs)("div",{className:"page page--gray page--main",children:[Object(p.jsx)(De,{}),Object(p.jsxs)("main",{className:j()("page__main","page__main--index",{"page__main--index-empty":0===t.length}),children:[Object(p.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(p.jsx)(Be,{}),Object(p.jsx)("div",{className:"cities",children:t.length>0?Object(p.jsx)(bt,{currentCityOffers:t}):Object(p.jsx)(vt,{currentCityName:e})})]})]})},Ft=a(48),Rt=a.n(Ft),Ct=a(25),kt=a.n(Ct);var Lt=function(e){var t=e.size,a=e.isFullScreen,r=e.isLoginScreen,s=e.isReviewForm,c=e.isFavoritesScreen;return Object(p.jsx)("div",{className:j()("loader-wrapper",Object(Ne.a)({},kt.a.loaderWrapperFullScreen,a),Object(Ne.a)({},kt.a.loaderWrapperFavoritesScreen,c),Object(Ne.a)({},kt.a.loaderWrapperLogin,r),Object(Ne.a)({},kt.a.loaderWrapperReview,s)),"data-testid":"loader",children:Object(p.jsx)(Rt.a,{color:"#66a5e8",size:t})})},qt=a(29),At=a.n(qt),zt={email:"E-mail",password:"Password"};var It=function(){var e=Object(o.b)(),t=Object(o.c)(Me),a=Object(r.useState)({email:{value:"",error:!1,touched:!1,errorText:"Please, enter a valid E-mail address",regex:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/},password:{value:"",error:!1,touched:!1,errorText:"Minimum 1 uppercase, 1 lowercase letter and 1 number",regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{3,}$/}}),s=Object(Ve.a)(a,2),c=s[0],i=s[1],n=function(e){var t=e.target,a=t.name,r=t.value,s=c[a].regex.test(r);i(Object(pe.a)(Object(pe.a)({},c),{},Object(Ne.a)({},a,Object(pe.a)(Object(pe.a)({},c[a]),{},{error:!s,value:r,touched:!0}))))};return Object(p.jsxs)("section",{className:"login","data-testid":"login-form",children:[Object(p.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(p.jsxs)("form",{className:"login__form form",action:"#",method:"post",onSubmit:function(t){t.preventDefault(),e(function(e){var t=e.email,a=e.password;return function(){var e=Object(w.a)(N.a.mark((function e(r,s,c){var i,n,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(oe()),e.prev=1,e.next=4,c.post(m.Login,{email:t,password:a});case 4:i=e.sent,n=i.data,o=n.token,me(o),r(le()),r(re(Oe(n))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),r(ue()),l.b.info(xe);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a,r){return e.apply(this,arguments)}}()}({email:c.email.value,password:c.password.value}))},children:[Object.entries(zt).map((function(e){var t=Object(Ve.a)(e,2),a=t[0],r=t[1],s=j()("login__input","form__input",Object(Ne.a)({},At.a.loginInputError,c[a].error&&c[a].touched));return Object(p.jsxs)("div",{className:j()(At.a.loginInputWrapper,"login__input-wrapper","form__input-wrapper"),children:[Object(p.jsx)("label",{className:"visually-hidden",htmlFor:a,children:r}),Object(p.jsx)("input",{className:s,id:a,type:a,name:a,placeholder:r,value:c[a].value,onChange:n}),c[a].error&&c[a].touched&&Object(p.jsx)("p",{className:At.a.loginInputErrorMessage,children:c[a].errorText})]},a)})),Object(p.jsx)("button",{className:"login__submit form__submit button",type:"submit",disabled:c.email.error||c.password.error||!c.email.touched||!c.password.touched,children:t===h.Loading?Object(p.jsx)(Lt,{size:10,isLoginScreen:!0}):"Sign in"})]})]})};var Pt=function(){var e=Object(o.b)(),t=y[function(e,t){var a=Math.ceil(Math.min(Math.abs(e),Math.abs(t))),r=Math.floor(Math.max(Math.abs(e),Math.abs(t))),s=Math.random()*(r-a+1)+a;return Math.floor(s)}(0,y.length-1)];return Object(p.jsx)("section",{className:"locations locations--login locations--current","data-testid":"random-location",children:Object(p.jsx)("div",{className:"locations__item",children:Object(p.jsx)(f.b,{className:"locations__item-link",to:"/",onClick:function(){e(R(t))},children:Object(p.jsx)("span",{children:t})})})})};var Ut=function(){return Object(p.jsxs)("div",{className:"page page--gray page--login",children:[Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"header__wrapper",children:Object(p.jsx)("div",{className:"header__left",children:Object(p.jsx)(x,{})})})})}),Object(p.jsx)("main",{className:"page__main page__main--login",children:Object(p.jsxs)("div",{className:"page__login-container container",children:[Object(p.jsx)(It,{}),Object(p.jsx)(Pt,{})]})})]})};var Mt=function(){return Object(p.jsxs)("div",{className:"page page--gray page--login","data-testid":"not-found-page",children:[Object(p.jsx)(De,{}),Object(p.jsx)("main",{className:"page__main page__main--login",children:Object(p.jsxs)("div",{className:"page__login-container container",children:[Object(p.jsx)("section",{className:"login",children:Object(p.jsxs)("h1",{className:"login__title",children:["404",Object(p.jsx)("br",{})," This page doesn't exist."]})}),Object(p.jsx)(Pt,{})]})})]})};var Tt=function(){return Object(p.jsx)("span",{className:"property__user-status","data-testid":"user-pro-label",children:"Pro"})};var Et=function(e){var t=e.user;return Object(p.jsxs)("div",{className:"property__host-user user",children:[Object(p.jsx)("div",{className:j()("property__avatar-wrapper","user__avatar-wrapper",{"property__avatar-wrapper--pro":t.isPro}),children:Object(p.jsx)("img",{className:"property__avatar user__avatar",src:"'/20520-six-cities-8/'".concat(t.avatarUrl),width:"74",height:"74",alt:"Host avatar"})}),Object(p.jsx)("span",{className:"property__user-name",children:t.name}),t.isPro&&Object(p.jsx)(Tt,{})]})};var Dt=function(e){var t=e.value,a=e.currentValue,r=e.id,s=e.onReviewChange,c=e.disabled;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",value:t,id:r,type:"radio",onChange:s,disabled:c,checked:t===a,"data-testid":"review-star-".concat(r)}),Object(p.jsx)("label",{htmlFor:r,className:"reviews__rating-label form__rating-label",title:"perfect",children:Object(p.jsx)("svg",{className:"form__star-image",width:"37",height:"33",children:Object(p.jsx)("use",{xlinkHref:"#icon-star"})})})]})},Wt=function(e){return e[F.Reviews].reviewPostStatus},Ht=Object(Ot.a)([function(e){return e[F.Reviews].reviews}],(function(e){return e.slice().sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})).slice(0,10)})),Yt=["5-stars","4-stars","3-stars","2-stars","1-star"],Bt={rating:"0",review:""};var Vt=function(e){var t=e.pageId,a=Object(o.b)(),s=Object(o.c)(Wt),c=Object(r.useState)(Bt),i=Object(Ve.a)(c,2),n=i[0],u=i[1];Object(r.useEffect)((function(){s===h.Success&&(u(Bt),a(ae()))}),[s]);var d=function(e){var t=e.target,a=t.name,r=t.value;u(Object(pe.a)(Object(pe.a)({},n),{},Object(Ne.a)({},a,r)))},j="0"!==n.rating&&n.review.length>=50&&n.review.length<=300,f=s===h.Loading;return Object(p.jsxs)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(e){e.preventDefault(),a(function(e,t){var a=t.comment,r=t.rating;return function(){var t=Object(w.a)(N.a.mark((function t(s,c,i){var n,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(X()),t.prev=1,t.next=4,i.post("".concat(m.Comments,"/").concat(e),{comment:a,rating:r});case 4:n=t.sent,o=n.data,s(ee(o.map((function(e){return ve(e)})))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),s(te()),l.b.info(xe);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(t,{comment:n.review,rating:n.rating}))},"data-testid":"review-form",children:[Object(p.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(p.jsx)("div",{className:"reviews__rating-form form__rating",children:Yt.map((function(e){return Object(p.jsx)(Dt,{value:e.split("-")[0],currentValue:n.rating,id:e,onReviewChange:d,disabled:f},e)}))}),Object(p.jsx)("textarea",{className:"reviews__textarea form__textarea",id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",value:n.review,onChange:d,disabled:f}),Object(p.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(p.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(p.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least ",Object(p.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(p.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:!j||f,children:f?Object(p.jsx)(Lt,{size:8,isReviewForm:!0}):"Submit"})]})]})},Zt=a(34),$t=a.n(Zt);var Gt=function(e){var t=e.review;return Object(p.jsxs)("li",{className:"reviews__item","data-testid":"review-item",children:[Object(p.jsxs)("div",{className:"reviews__user user",children:[Object(p.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(p.jsx)("img",{className:"reviews__avatar user__avatar",src:t.user.avatarUrl,width:"54",height:"54",alt:"Reviews avatar"})}),Object(p.jsx)("span",{className:"reviews__user-name",children:t.user.name})]}),Object(p.jsxs)("div",{className:"reviews__info",children:[Object(p.jsx)("div",{className:"reviews__rating rating",children:Object(p.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(p.jsx)("span",{style:{width:Xe(t.rating)}}),Object(p.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(p.jsx)("p",{className:"reviews__text",children:t.comment}),Object(p.jsx)("time",{className:"reviews__time",dateTime:$t()(t.date).format("YYYY-MM-DD"),children:$t()(t.date).format("MMMM YYYY")})]})]})};var Jt=function(e){var t=e.reviews;return Object(p.jsx)("ul",{className:"reviews__list","data-testid":"review-list",children:t.map((function(e){return Object(p.jsx)(Gt,{review:e},e.id)}))})};var Qt=function(e){var t=e.pageId,a=Object(o.c)(Ht),r=Object(o.c)(Ue);return Object(p.jsxs)("section",{className:"property__reviews reviews","data-testid":"property-reviews",children:[Object(p.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(p.jsx)("span",{className:"reviews__amount",children:a.length<10?a.length:10})]}),Object(p.jsx)(Jt,{reviews:a}),r===v.Auth&&Object(p.jsx)(Vt,{pageId:t})]})};var Kt=function(){return Object(p.jsxs)("div",{className:"page page--gray page--login","data-testid":"load-error-page",children:[Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("div",{className:"header__wrapper",children:Object(p.jsx)("div",{className:"header__left",children:Object(p.jsx)("a",{className:"header__logo-link header__logo-link--active",href:"/",children:Object(p.jsx)("img",{className:"header__logo",src:"/20520-six-cities-8/img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})})})})}),Object(p.jsx)("main",{className:"page__main page__main--login",children:Object(p.jsx)("div",{className:"page__login-container container",children:Object(p.jsx)("section",{className:"login",children:Object(p.jsxs)("h1",{className:"login__title",children:["An unexpected error occurred while loading data.",Object(p.jsx)("br",{})," Please try again later."]})})})})]})},Xt=a(49),ea=a.n(Xt),ta={apartment:"Apartment",room:"Private Room",house:"House",hotel:"Hotel"};var aa=function(){var e=Object(o.b)(),t=Object(o.c)(gt),a=Object(o.c)(wt).slice(0,3),s=Object(o.c)(Nt),c=Object(u.h)().id;if(Object(r.useEffect)((function(){return e(function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a,r,s){var c,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(D()),t.prev=1,t.next=4,s.get("".concat(m.Offers,"/").concat(e));case 4:c=t.sent,i=c.data,a(W(be(i))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),404===t.t0?a(W(null)):a(H());case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(c)),e(function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a,r,s){var c,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Y()),t.prev=1,t.next=4,s.get("".concat(m.Offers,"/").concat(e).concat(m.Nearby));case 4:c=t.sent,i=c.data,a(B(i.map((function(e){return be(e)})))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a(V()),404!==t.t0&&l.b.info("There was an error loading places nearby, please try again later.");case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(c)),e(function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a,r,s){var c,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(G()),t.prev=1,t.next=4,s.get("".concat(m.Comments,"/").concat(e));case 4:c=t.sent,i=c.data,a(J(i.map((function(e){return ve(e)})))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a(Q()),400!==t.t0&&l.b.info("An error occurred while loading comments, please try again later.");case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a,r){return t.apply(this,arguments)}}()}(c)),function(){e(Z()),e(K())}}),[c]),s===h.Idle||s===h.Loading)return Object(p.jsx)(Lt,{size:15,isFullScreen:!0});if(s===h.Failed)return Object(p.jsx)(Kt,{});if(!t)return Object(p.jsx)(Mt,{});var i=t.id,n=t.bedrooms,d=t.description,f=t.goods,b=t.host,v=t.images,O=t.isFavorite,_=t.isPremium,x=t.maxAdults,g=t.price,y=t.rating,S=t.title,F=t.type,R=t.city;return Object(p.jsxs)("div",{className:"page","data-testid":"room-page",children:[Object(p.jsx)(De,{}),Object(p.jsxs)("main",{className:"page__main page__main--property",children:[Object(p.jsxs)("section",{className:"property",children:[Object(p.jsx)("div",{className:"property__gallery-container container",children:Object(p.jsx)("div",{className:"property__gallery",children:v.slice(0,6).map((function(e){return Object(p.jsx)("div",{className:"property__image-wrapper",children:Object(p.jsx)("img",{className:"property__image",src:e,alt:S})},e)}))})}),Object(p.jsx)("div",{className:"property__container container",children:Object(p.jsxs)("div",{className:"property__wrapper",children:[_&&Object(p.jsx)(Ke,{className:"property__mark"}),Object(p.jsxs)("div",{className:"property__name-wrapper",children:[Object(p.jsx)("h1",{className:"property__name",children:S}),Object(p.jsx)(rt,{buttonType:"property",isFavorite:O,id:i},i)]}),Object(p.jsxs)("div",{className:"property__rating rating",children:[Object(p.jsxs)("div",{className:"property__stars rating__stars",children:[Object(p.jsx)("span",{style:{width:Xe(y)}}),Object(p.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(p.jsx)("span",{className:"property__rating-value rating__value",children:y})]}),Object(p.jsxs)("ul",{className:"property__features",children:[Object(p.jsx)("li",{className:j()("property__feature",ea.a.propertyFeatureEntire),children:ta[F]}),Object(p.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[n," ",n>1?"Bedrooms":"Bedroom"]}),Object(p.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",x," ",x>1?"adults":"adult"]})]}),Object(p.jsxs)("div",{className:"property__price",children:[Object(p.jsxs)("b",{className:"property__price-value",children:["\u20ac",g]}),Object(p.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(p.jsxs)("div",{className:"property__inside",children:[Object(p.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(p.jsx)("ul",{className:"property__inside-list",children:f.map((function(e){return Object(p.jsx)("li",{className:"property__inside-item",children:e},e)}))})]}),Object(p.jsxs)("div",{className:"property__host",children:[Object(p.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(p.jsx)(Et,{user:b}),Object(p.jsx)("div",{className:"property__description",children:Object(p.jsx)("p",{className:"property__text",children:d})})]}),Object(p.jsx)(Qt,{pageId:c})]})}),Object(p.jsx)(pt,{className:"property__map",offers:[].concat(Object(Ze.a)(a),[t]),city:R,activeCardId:parseInt(c,10)})]}),Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("section",{className:"near-places places",children:[Object(p.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(p.jsx)("div",{className:"near-places__list places__list",children:Object(p.jsx)(ot,{offers:a,cardType:"near-places"})})]})})]})]})};var ra=function(e){var t=e.city,a=e.cityOffers;return Object(p.jsxs)("li",{className:"favorites__locations-items",children:[Object(p.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(p.jsx)("div",{className:"locations__item",children:Object(p.jsx)("a",{className:"locations__item-link",href:"/#",children:Object(p.jsx)("span",{children:t})})})}),Object(p.jsx)("div",{className:"favorites__places",children:Object(p.jsx)(ot,{offers:a,cardType:"favorites"})})]})};var sa=function(){return Object(p.jsxs)("section",{className:"favorites favorites--empty","data-testid":"favorites-empty",children:[Object(p.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(p.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(p.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(p.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})},ca=function(e){return e[F.Favorites].favoriteOffersStatus},ia=function(e){return e[F.Favorites].favoriteOffers};var na=function(){var e,t=Object(o.c)(ia);return 0===t.length?Object(p.jsx)(sa,{}):Object(p.jsxs)("section",{className:"favorites","data-testid":"favorites-list",children:[Object(p.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(p.jsx)("ul",{className:"favorites__list",children:Object(p.jsx)("div",{children:Object.entries((e=t,e.reduce((function(e,t){var a=t.city.name;return e[a]||(e[a]=[]),e[a].push(t),e}),{}))).map((function(e){var t=Object(Ve.a)(e,2),a=t[0],r=t[1];return Object(p.jsx)(ra,{city:a,cityOffers:r},a)}))})})]})};var oa=function(){var e=Object(o.b)(),t=Object(o.c)(ca),a=Object(o.c)(ia);return Object(r.useEffect)((function(){return e(function(){var e=Object(w.a)(N.a.mark((function e(t,a,r){var s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A()),e.prev=1,e.next=4,r.get(m.Favorite);case 4:s=e.sent,c=s.data,t(z(c.map((function(e){return be(e)})))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(I());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,r){return e.apply(this,arguments)}}()),function(){e(P())}}),[]),t===h.Failed?Object(p.jsx)(Kt,{}):Object(p.jsxs)("div",{className:j()("page",{"page--favorites-empty":0===a.length}),children:[Object(p.jsx)(De,{}),Object(p.jsx)("main",{className:j()("page__main","page__main--favorites",{"page__main--favorites-empty":0===a.length}),children:Object(p.jsx)("div",{className:"page__favorites-container container",children:t===h.Idle||t===h.Loading?Object(p.jsx)(Lt,{size:15,isFavoritesScreen:!0}):Object(p.jsx)(na,{})})}),Object(p.jsx)("footer",{className:"footer container",children:Object(p.jsx)(f.b,{className:"footer__logo-link",to:"/",children:Object(p.jsx)("img",{className:"footer__logo",src:"/20520-six-cities-8/img/logo.svg",alt:"6 cities logo",width:"64",height:"33"})})})]})};var la=function(e){var t=e.exact,a=e.path,r=e.render,s=e.authorizationStatus,c=e.verifiableStatus,i=e.redirectTo;return Object(p.jsx)(u.b,{exact:t,path:a,render:function(){return s===v.Unknown?Object(p.jsx)(Lt,{size:15,isFullScreen:!0}):s===c?r():Object(p.jsx)(u.a,{to:i})}})};var ua,da=function(){var e=Object(o.c)(xt),t=Object(o.c)(Ue);return e===h.Loading?Object(p.jsx)(Lt,{size:15,isFullScreen:!0}):e===h.Failed?Object(p.jsx)(Kt,{}):Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:b.Root,children:Object(p.jsx)(St,{})}),Object(p.jsx)(la,{exact:!0,path:b.Favorites,render:function(){return Object(p.jsx)(oa,{})},authorizationStatus:t,verifiableStatus:v.Auth,redirectTo:b.Login}),Object(p.jsx)(la,{exact:!0,path:b.Login,render:function(){return Object(p.jsx)(Ut,{})},authorizationStatus:t,verifiableStatus:v.NoAuth,redirectTo:b.Root}),Object(p.jsx)(u.b,{exact:!0,path:b.Room,children:Object(p.jsx)(aa,{})}),Object(p.jsx)(u.b,{children:Object(p.jsx)(Mt,{})})]})},ja=a(50),fa=a.n(ja);!function(e){e[e.Unauthorized=401]="Unauthorized"}(ua||(ua={}));a(88);var pa=function(e){var t=fa.a.create({baseURL:"https://8.react.pages.academy/six-cities",timeout:5e3});return t.interceptors.response.use((function(e){return e}),(function(t){var a=t.response;return(null===a||void 0===a?void 0:a.status)===ua.Unauthorized&&e(),Promise.reject(null===a||void 0===a?void 0:a.status)})),t.interceptors.request.use((function(e){var t=function(){var e=localStorage.getItem(he);return null!==e&&void 0!==e?e:""}();return t&&(e.headers["x-token"]=t),e})),t}((function(){return ba.dispatch(ie(v.NoAuth))})),ba=Object(n.a)({reducer:Ie,middleware:function(e){return e({thunk:{extraArgument:pa}})}});ba.dispatch(function(){var e=Object(w.a)(N.a.mark((function e(t,a,r){var s,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ce()),e.prev=1,e.next=4,r.get(m.Login);case 4:s=e.sent,c=s.data,t(ie(v.Auth)),t(re(Oe(c))),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),t(ne()),t(se()),_e();case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,r){return e.apply(this,arguments)}}()),ba.dispatch(ge()),i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(o.a,{store:ba,children:Object(p.jsxs)(f.a,{children:[Object(p.jsx)(l.a,{}),Object(p.jsx)(da,{})]})})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.51b09f3e.chunk.js.map